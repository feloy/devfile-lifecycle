<div class="main">
    <mat-card *ngFor="let command of commands">
        <mat-card-header>
            <mat-card-title>{{command.name}}</mat-card-title>
            <mat-card-subtitle *ngIf="command.type == 'exec'">Exec Command</mat-card-subtitle>
            <mat-card-subtitle *ngIf="command.type == 'apply'">Apply Command</mat-card-subtitle>
            <mat-card-subtitle *ngIf="command.type == 'composite'">Composite Command</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content *ngIf="command.type == 'exec'">
            <div>Container: {{command.exec?.component}}</div>
            <div>Command Line: {{command.exec?.commandLine}}</div>
            <div>Working Directory: {{command.exec?.workingDir}}</div>
            <div *ngIf="command.exec?.hotReloadCapable">Is Hot Reload Capable</div>
        </mat-card-content>

        <mat-card-content *ngIf="command.type == 'apply'">
            <div>Cluster resource: {{command.apply?.component}}</div>
        </mat-card-content>

        <mat-card-content *ngIf="command.type == 'composite'">
            <div *ngIf="command.composite?.parallel">Commands executed in parallel</div>
            <div *ngIf="!command.composite?.parallel">Commands executed serially</div>
            <ng-container *ngIf="command.composite?.parallel">
                <div class="parallel-command" *ngFor="let command of command.composite?.commands?.split(',')">
                    <span class="command">{{command}}</span>
                </div>
            </ng-container>
            <div class="serial-commands" *ngIf="!command.composite?.parallel">
                <span class="command" *ngFor="let command of command.composite?.commands?.split(',')">
                    {{command}}
                </span>
            </div>
        </mat-card-content>
    </mat-card>

    <app-command-exec *ngIf="forceDisplayExecForm"></app-command-exec>
    <app-command-apply *ngIf="forceDisplayApplyForm"></app-command-apply>
    <app-command-composite *ngIf="forceDisplayCompositeForm"></app-command-composite>

    <ng-container *ngIf="!forceDisplayExecForm && !forceDisplayApplyForm && !forceDisplayCompositeForm">
        <button mat-flat-button (click)="displayExecForm()">Add an Exec Command</button>
        <button mat-flat-button (click)="displayApplyForm()">Add an Apply Command</button>
        <button mat-flat-button (click)="displayCompositeForm()">Add a Composite Command</button>
    </ng-container>
</div>
